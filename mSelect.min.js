!function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define("mSelect",function(){return e()}):t.mSelect=e()}(this,function(){"use strict";var t=document,e=t.body,n=t.createElement("div"),i=n.style,s=["webkit","Moz","ms","O"],a=0,l=s.length,r=function(t){return t.replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()})},h=function(t,e,n){if("string"==typeof e)return t.addEventListener(e,n,!1);for(var i=0,s=e.length;s>i;i++)t.addEventListener(e[i],n,!1)},o=function(t){var e=r(t);if(e in i)return e;for(a=0;l>a;a++)if(e=r(s[a]+"-"+t),e in i)return e;return null},c=function(t){var e=r(t);if(e in i)return!0;for(a=0;l>a;a++)if(e=r(s[a]+"-"+t),e in i)return!0;return!1},d=function(){var t,i;return e.appendChild(n),c("transform")&&(i=o("transform"),n.style[i]="translate3d(1px,1px,1px)",t=window.getComputedStyle(n,null)[i]),e.removeChild(n),void 0!==t&&t.length>0&&"none"!==t},u=function(t,e,n,i,s,a){var l,r,h=t-e,o=Math.abs(h)/n;return a=void 0===a?6e-4:a,l=t+o*o/(2*a)*(0>h?-1:1),r=o/a,i>l?(l=s?i-s/2.5*(o/8):i,h=Math.abs(l-t),r=h/o):l>0&&(l=s?s/2.5*(o/8):0,h=Math.abs(t)+l,r=h/o),{destination:Math.round(l),duration:r}},f=function(e){var n=t.getElementsByTagName("head")[0],i=t.createElement("link");i.rel="stylesheet",i.href=e,n.appendChild(i)},m=o("transition"),p=o("transform"),v=c("transition"),g=c("transform"),C=d(),x=function(t){var e=t.children[0],n=t.offsetHeight,i=e.offsetHeight,s=n-i,a=e.children.length,l=Math.floor(i/a),r=0,o=null,c=0,d=0,f=0,x=null,_=!1;t._index=0;var b=function(t){e.style[m]="all "+t+"ms"},w=function(t){C?e.style[p]="translate3d(0px,"+t+"px,0px)":g?e.style[p]="translate(0px,"+t+"px)":e.style.top=t+"px",c=t},M=function(){b(0),D()&&H()},y=function(t,e){var n=c,i=t-n,s=Date.now(),a=e,l=function(t){return Math.sqrt(1- --t*t)};!function r(){var e=Date.now(),h=e-s,o=l(h/a),c=n+o*i;return w(c),h>=a?(w(t),void M()):void(x=setTimeout(r,10))}()},E=function(t,e){v?(b(e),w(t)):y(t,e)},D=function(){return c>0?(E(0,600),!1):s>c?(E(s,600),!1):!0},H=function(){var e=Math.round(c/l),n=e*l;t._index=Math.abs(e),c/l!==parseInt(c/l)&&E(n,600)},S=function(t){r=t.touches?t.touches[0].pageY:t.pageY,_=!0,o=null,d=c,f=Date.now(),v?b(0):clearTimeout(x)},N=function(t){if(t.preventDefault(),_){var e=Date.now(),n=t.touches?t.touches[0].pageY:t.pageY,i=null===o?0:n-o;(c>0||s>c)&&(i/=4),w(c+i),o=n,e-f>300&&(f=e,d=c)}},B=function(){_=!1;var e=Date.now()-f;if(null!==o&&D()){if(300>e&&Math.abs(o-r)>10){var i=u(c,d,e,s,n),a=Math.round(i.destination),h=Math.round(i.duration),m=Math.round(a/l);return t._index=Math.abs(m),400>h&&(h=400),void E(m*l,h)}H()}};return h(t,["touchstart","mousedown"],S),h(t,["touchmove","mousemove"],N),h(t,["touchend","mouseup"],B),h(e,["webkitTransitionEnd","transitionend"],M),t._translate=w,t._length=a,t._singleH=l,t},_=function(t,e){var n=[];do n.push(t++);while(e>=t);return n},b={date:[{name:"年",list:_((new Date).getFullYear()-10,(new Date).getFullYear()+10)},{name:"月",list:_(1,12)},{name:"日",list:_(1,new Date((new Date).getFullYear(),(new Date).getMonth()+1,0).getDate())}],time:[{name:"时",list:_(0,23)},{name:"分",list:_(0,59)}]},w=[],M=function(t){t=t||{},this.mode=t.mode||"",this.data=t.data||""!==this.mode&&b[this.mode],this.data.length&&(this.length=this.data.length,this.align=t.align||"",this.title=t.title||"",this.cssUrl=t.cssUrl||"mSelect.css",w.indexOf(this.cssUrl)<0&&(w.push(this.cssUrl),f(this.cssUrl)),this.parent=t.parent||document.body,this.boxClass=t.boxClass||"mSelect-box",this.containerClass=t.containerClass||"mSelect-container",this.headClass=t.headClass||"mSelect-head",this.contentClass=t.contentClass||"mSelect-content",this.wrapperClass=t.wrapperClass||"mSelect-wrapper",this.scrollerClass=t.scrollerClass||"mSelect-scroller",this.suffixClass=t.suffixClass||"mSelect-suffix",this.maskClass=t.maskClass||"mSelect-mask",this.footClass=t.footClass||"mSelect-foot",this.defineClass=t.defineClass||"mSelect-define",this.cancelClass=t.cancelClass||"mSelect-cancel",this.select=t.select||function(){},"function"==typeof t&&(this.select=t),this.items=[],this.els=[])};return M.prototype={_initCreate:function(){var t=this,e=function(e){var n=e.name||"",i=e.list||[],s=document.createElement("div"),a=document.createElement("ul"),l=document.createElement("div"),r=document.createElement("div"),h="<li></li>",o=0,c=i.length;for(s.className=t.wrapperClass,a.className=t.scrollerClass,l.className=t.suffixClass,r.className=t.maskClass;c>o;o++)h+=(""!==n?"<li>":'<li style="text-align:center">')+i[o]+"</li>";return h+="<li></li>",a.innerHTML=h,s.appendChild(a),""!==n?(l.innerHTML=n,s.appendChild(l)):a.style.width="100%",s.appendChild(r),s},n=document.documentElement.clientWidth,i=document.documentElement.clientHeight,s=document.createElement("div"),a=document.createElement("div"),l=document.createElement("div"),r=document.createElement("div");this.box=document.createElement("div"),this.box.className=this.boxClass,this.box.style.width=n+"px",this.box.style.height=i+"px",s.className=this.containerClass,""!==this.title&&(a.className=this.headClass,a.innerHTML=this.title,s.appendChild(a)),l.className=this.contentClass;for(var h=0,o=null;h<this.length;h++)o=e(this.data[h]),l.appendChild(o),this.items.push(o);s.appendChild(l),r.className=this.footClass,this.defineBtn=document.createElement("div"),this.defineBtn.className=this.defineClass,this.defineBtn.innerHTML="确定",this.cancelBtn=document.createElement("div"),this.cancelBtn.className=this.cancelClass,this.cancelBtn.innerHTML="取消",r.appendChild(this.defineBtn),r.appendChild(this.cancelBtn),s.appendChild(r),this.box.appendChild(s),this.parent.appendChild(this.box)},_bindScroll:function(){for(var t=0;t<this.length;t++)this.els.push(x(this.items[t]))},_resetPosition:function(){if(""!==this.align)return this._setAlign();if("date"===this.mode){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),s=this.data[0].list.indexOf(e),a=this.data[1].list.indexOf(n),l=this.data[2].list.indexOf(i),r=this.els[0];r._index=s,r._translate(-s*r._singleH);var h=this.els[1];h._index=a,h._translate(-a*h._singleH);var o=this.els[2];o._index=l,o._translate(-l*o._singleH)}else if("time"===this.mode){var t=new Date,c=t.getHours(),d=t.getMinutes(),u=this.data[0].list.indexOf(c),a=this.data[1].list.indexOf(d),f=this.els[0];f._index=u,f._translate(-u*f._singleH);var h=this.els[1];h._index=a,h._translate(-a*h._singleH)}},_setAlign:function(){if("center"===this.align)for(var t=0;t<this.length;t++){var e=this.els[t],n=2-Math.ceil(e._length/2);e._index=Math.abs(n),e._translate(n*e._singleH)}else if("bottom"===this.align)for(var t=0;t<this.length;t++){var e=this.els[t],n=3-e._length;e._index=Math.abs(n),e._translate(n*e._singleH)}},_initEvent:function(){h(this.defineBtn,"click",function(){for(var t=[],e=0;e<this.length;e++)t.push(this.data[e].list[this.els[e]._index]);this.hide(),this.select&&this.select(t)}.bind(this)),h(this.cancelBtn,"click",function(){this.hide()}.bind(this)),h(this.box,"touchmove",function(t){t.preventDefault()})},_setup:function(){this._initCreate(),this._bindScroll(),this._resetPosition(),this._initEvent()},show:function(){this.box||this._setup(),this.box.style.display="block"},hide:function(){this.box.style.display="none"}},M.number=_,M});